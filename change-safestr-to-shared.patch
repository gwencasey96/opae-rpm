--- opae-1.4.0-1.orig/usr/safe_string/CMakeLists.txt	2020-02-20 11:34:39.414353070 -0500
+++ opae-1.4.0-1/usr/safe_string/CMakeLists.txt	2020-02-27 17:41:56.428861239 -0500
@@ -106,9 +106,12 @@
   wmemset_s.c
 )
 
-add_library(safestr STATIC ${SRC})
+add_library(safestr SHARED ${SRC})
 
 set_property(TARGET safestr PROPERTY C_STANDARD 99)
+set_target_properties(safestr PROPERTIES
+  VERSION ${INTEL_FPGA_API_VERSION}
+  SOVERSION ${INTEL_FPGA_API_VER_MAJOR})
 set_property(TARGET safestr PROPERTY POSITION_INDEPENDENT_CODE ON)
 target_compile_definitions(safestr PRIVATE PIC=1)
 target_compile_options(safestr PRIVATE -O3)
@@ -116,15 +119,6 @@
 # mem_primitives_lib.c is optimized through the use of fallthrough switch statements.
 set_source_files_properties(mem_primitives_lib.c PROPERTIES COMPILE_FLAGS -Wno-implicit-fallthrough)
 
-
-
-get_property(LIB64 GLOBAL PROPERTY FIND_LIBRARY_USE_LIB64_PATHS) 
-if ("${LIB64}" STREQUAL "TRUE")
-  install(TARGETS safestr
-    ARCHIVE DESTINATION lib64
-    COMPONENT safestrlib)
-else()
-  install(TARGETS safestr
-    ARCHIVE DESTINATION lib
-    COMPONENT safestrlib)
-endif() 
\ No newline at end of file
+install(TARGETS safestr
+  LIBRARY DESTINATION ${OPAE_LIB_INSTALL_DIR}
+  COMPONENT safestrlib)
